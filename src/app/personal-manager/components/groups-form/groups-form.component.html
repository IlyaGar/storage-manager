<div id="content">

    <mat-tab-group>
        <mat-tab label="Группы"> 

            <mat-form-field id="no" appearance="legacy">
                <mat-label> Фильтр </mat-label>
                <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Введите значение">
                <mat-icon matSuffix>search</mat-icon>
                <mat-hint> Поиск по всем столбцам </mat-hint>
            </mat-form-field>

            <div class="tab-container">
                <table mat-table [dataSource]="groups">

                    <ng-container matColumnDef="name">
                        <th mat-header-cell *matHeaderCellDef> Группы </th>
                        <td mat-cell *matCellDef="let element"> {{element.name}} </td>
                    </ng-container>      
                    
                    <ng-container matColumnDef="rights">
                        <th mat-header-cell *matHeaderCellDef> Права </th>
                        <td mat-cell *matCellDef="let element"> 
                            <!-- {{element.rights}}  -->
                            <ul>
                                <li *ngFor="let right of element.rights">
                                    {{ right }}
                                </li>
                            </ul>
                        </td>
                    </ng-container>   
                    
                    <ng-container matColumnDef="menu">
                        <th mat-header-cell *matHeaderCellDef> </th>
                        <td mat-cell *matCellDef="let element">
                            <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
                                <mat-icon>more_vert</mat-icon>
                            </button>
                            <mat-menu #menu="matMenu">
                                <button mat-menu-item (click)="onOpenEditGroupForm(element)">
                                    <mat-icon>edit</mat-icon>
                                    <span> Редактировать </span>
                                </button>
                                <button mat-menu-item>
                                    <mat-icon>delete_forever</mat-icon>
                                    <span> Удалить </span>
                                </button>
                            </mat-menu>
                        </td>
                    </ng-container>  
                    
                    <tr mat-header-row *matHeaderRowDef="displayedColumnsGrop; sticky: true"></tr>
                    <tr id="row" mat-row *matRowDef="let row; columns: displayedColumnsGrop; let i = index" 
                    (click)="onSelectRow(i)" 
                    [ngClass]="{ 'select-row': i === selectItem }"></tr>

                </table>
            </div>            
        </mat-tab>
        <mat-tab label="Создать группу"> 

            <mat-horizontal-stepper linear #stepper>
            <mat-step [stepControl]="firstFormGroup">
                <form [formGroup]="firstFormGroup">
                    <ng-template matStepLabel> Название новой группы </ng-template>
                    <mat-form-field id="only" appearance="outline">
                        <mat-label> Введите название </mat-label>
                        <input matInput placeholder="Название" [(ngModel)]="nameGroup" formControlName="firstCtrl" required>
                    </mat-form-field>
                    <hr>
                    <div>
                        <button type="button" id="bt" class="btn btn-light"  matStepperNext> Дальше </button> 
                    </div>
                </form>
            </mat-step>
            <mat-step [stepControl]="secondFormGroup">
                <form [formGroup]="secondFormGroup">
                    <ng-template matStepLabel> Права </ng-template>
                    <div class="list-container">
                        <mat-selection-list #rights formControlName="secondCtrl" required>
                            <mat-list-option *ngFor="let right of listRights"  (click)="onClickRight(right)">
                                {{right}}
                            </mat-list-option>
                        </mat-selection-list>   
                    </div>
                    <hr>
                    <div>
                        <button type="button" id="bt" class="btn btn-light"  matStepperPrevious> Назад </button> 
                        <button type="button" id="bt" class="btn btn-light"  matStepperNext> Дальше </button> 
                    </div>
                </form>
            </mat-step>
            <mat-step>
                <ng-template matStepLabel> Пользователи </ng-template>
                <div class="list-container">
                    <mat-selection-list #users>
                        <mat-list-option *ngFor="let user of listUsers"  (click)="onClickUser(right)">
                            {{user}}
                        </mat-list-option>
                    </mat-selection-list>  
                </div>
                <hr>
                <div>
                    <button type="button" id="bt" class="btn btn-light"  matStepperPrevious> Назад </button> 
                    <button type="button" id="bt" class="btn btn-light"  matStepperNext> Дальше </button> 
                </div>
            </mat-step>
            <mat-step>
                <ng-template matStepLabel> Готово </ng-template>
                Потвердите создание группы.
                <hr>
                <div>
                    <button type="button" id="bt" class="btn btn-light"  matStepperPrevious> Назад </button> 
                    <button type="button" id="bt" class="btn btn-warning"  (click)="stepper.reset()"> Сброс </button> 
                    <button type="button" id="bt" class="btn btn-primary"  (click)="onCreateGroup()"> Создать </button> 
                </div>
            </mat-step>
            </mat-horizontal-stepper>
        </mat-tab>
    </mat-tab-group>		

</div>