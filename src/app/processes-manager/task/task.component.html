<mat-drawer-container class="example-container">
    
    <mat-drawer mode="side" opened>

        <h5> Новое задание </h5>

        <app-processes-form (onDataSelected)="addProcesses($event)"></app-processes-form>
        <app-base-form (onDataSelected)="addBase($event)"></app-base-form>
        <app-proc-personal-list-form (onDataSelected)="addUser($event)"></app-proc-personal-list-form>
        <br>
        <p id="as-method"> Способ сборки: </p>
        <div class="bt-inline">
            <mat-button-toggle-group appearance="legacy" name="fontStyle" aria-label="Font Style" [(ngModel)]="selectedMethod">
                <mat-button-toggle value="auto" data-toggle="tooltip" data-placement="bottom" matTooltip="Авто">
                    Авто
                </mat-button-toggle>
                <mat-button-toggle value="hand" data-toggle="tooltip" data-placement="bottom" matTooltip="Ручной">
                    Ручной
                </mat-button-toggle>
                <mat-button-toggle value="shtabel" data-toggle="tooltip" data-placement="bottom" matTooltip="Штабелер">
                    Штабелер
                </mat-button-toggle>
            </mat-button-toggle-group>
        </div>
        <mat-divider></mat-divider>
        <div class="br-pad container">
            <div class="box">
                <div matTooltip="Очистить все данные">
                    <button mat-raised-button id="butt-cancel"
                        color="primary"
                        class="btn btn-default"
                        mwlConfirmationPopover
                        [popoverMessage]="'Вы действительно хотите <b>очистить</b> формы?'"
                        [confirmText]="'Да'"
                        [cancelText]="'Нет'"
                        placement="right"
                        (confirm)="onClear()"
                        (cancel)="cancelClicked = true">
                        Очистить
                    </button> 
                </div>
                <div matTooltip="Сохранить все изменения">
                    <button
                        mat-raised-button 
                        [disabled]="isDisabled"
                        color="primary"
                        class="btn btn-default"
                        (click)="onOpenConfirmationForm()">           
                        Создать
                    </button> 
                </div>
            </div>
        </div>

    </mat-drawer>
    <mat-drawer-content>
        <div class="list-icon">
                    
            <img src="../../assets/pending_ico.ico" width="20" height="20" data-placement="bottom" matTooltip="Новая в очереди" /> 
            <small><span id="status" class="mybadge-new"> Новая в очереди </span></small>

            <img src="../../assets/favicon_arrows.ico" width="20" height="20" data-placement="bottom" matTooltip="Принято в исполнение"/> 
            <small><span id="status" class="mybadge-just"> Принято в исполнение </span></small>

            <img src="../../assets/favicon-red.ico" width="20" height="20" data-placement="bottom" matTooltip="Завершено частично"/> 
            <small><span id="status" class="mybadge-notall"> Завершено частично </span></small>

            <img src="../../assets/favicon-green.ico" width="20" height="20" data-placement="bottom" matTooltip="Завершено полностью"/>
            <small><span id="status" class="mybadge-all"> Завершено полностью </span></small>

            <img src="../../assets/57-512.png" width="20" height="20" data-placement="bottom" matTooltip="Завершено полностью"/>
            <small><span id="status" class="mybadge-notall"> Некоррестная заявка </span></small>
            
        </div>

        <table mat-table [dataSource]="dataSource" class="table-hover" multiTemplateDataRows >

            <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef> Статус </th>
                <td mat-cell *matCellDef="let element"> 

                    <ng-container *ngIf="element.order_status === 'Новая в очереди'">
                        <img src="../../assets/pending_ico.ico" width="20" height="20" data-placement="bottom" matTooltip="Новая в очереди" /> 
                    </ng-container>

                    <ng-container *ngIf="element.order_status === 'Принято в исполнение'">
                        <img src="../../assets/favicon_arrows.ico" width="20" height="20" data-placement="bottom" matTooltip="Принято в исполнение"/> 
                    </ng-container>
                        
                    <ng-container *ngIf="element.order_status === 'Завершено частично'">
                        <img src="../../assets/favicon-red.ico" width="20" height="20" data-placement="bottom" matTooltip="Завершено частично"/> 
                    </ng-container>                       

                    <ng-container *ngIf="element.order_status === 'Завершено полностью'">
                        <img src="../../assets/favicon-green.ico" width="20" height="20" data-placement="bottom" matTooltip="Завершено полностью"/>
                    </ng-container>

                </td>
            </ng-container>

            <ng-container matColumnDef="nom">
                <th mat-header-cell *matHeaderCellDef> № заявки </th>
                <td mat-cell *matCellDef="let element" > 
                    <mat-grid-list cols="1" rowHeight="50px">
                        <mat-grid-tile> {{element.iD}} </mat-grid-tile>
                        <mat-grid-tile> {{element.order_datetime}} </mat-grid-tile>
                    </mat-grid-list>
                </td>
            </ng-container>

            <ng-container matColumnDef="process">
                <th mat-header-cell *matHeaderCellDef> Процесс </th>
                <td mat-cell *matCellDef="let element" > {{element.order_process}} </td>
            </ng-container>

            <ng-container matColumnDef="base">
                <th mat-header-cell *matHeaderCellDef> Основание </th>
                <td mat-cell *matCellDef="let element" > {{element.order_base}} </td>
            </ng-container>
    
            <ng-container matColumnDef="executor">
                <th mat-header-cell *matHeaderCellDef> Исполнитель </th>
                <td mat-cell *matCellDef="let element" > {{element.order_candoit}} </td>
            </ng-container>
    
            <ng-container matColumnDef="type">
                <th mat-header-cell *matHeaderCellDef> Метод сборки </th>
                <td mat-cell *matCellDef="let element"> {{element.order_method}} </td>
            </ng-container>     

            <ng-container matColumnDef="place">
                <th mat-header-cell *matHeaderCellDef> Место расположения </th>
                <td mat-cell *matCellDef="let element"> {{element.order_place}} </td>
            </ng-container>    
    
            <ng-container matColumnDef="percent">
                <th mat-header-cell *matHeaderCellDef> Прогресс </th>
                <td mat-cell *matCellDef="let element"> 
                    <mat-grid-list cols="1" rowHeight="1em">
                        <mat-grid-tile id="percent"> {{element.order_prog}}% </mat-grid-tile>
                        <mat-grid-tile data-placement="bottom" matTooltip="{{element.percent}}%">
                            <mat-progress-bar mode="determinate" [value]="element.percent"></mat-progress-bar>
                        </mat-grid-tile>
                    </mat-grid-list>
                </td>
            </ng-container>
    
            <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef>  </th>
                <td mat-cell *matCellDef="let element">  </td>
            </ng-container> 
                    
            <ng-container matColumnDef="expandedDetail">
                <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplay.length">
                    <div class="example-element-detail" [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                        {{element.order_user}} - {{element.order_start}} - {{element.order_end}}
                    </div>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnsToDisplay; sticky: true"></tr>
            <tr mat-row *matRowDef="let element; columns: columnsToDisplay;"
                class="example-element-row"
                [class.example-expanded-row]="expandedElement === element"
                (click)="expandedElement = expandedElement === element ? null : element">
            </tr>
            <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>

        </table>

    </mat-drawer-content>
   
</mat-drawer-container>